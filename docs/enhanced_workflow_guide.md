# VIBEZEN 強化版一気通貫ワークフロー ガイド

最終更新: 2025-01-27

## 概要

VIBEZEN強化版一気通貫ワークフローは、既存プロジェクトでも利用可能な品質管理統合ワークフローです。従来の[プロジェクト追加]だけでなく、[機能追加]などの特殊プロンプトと組み合わせて使用できます。

## 主な特徴

### 1. 既存プロジェクト対応
- 新規プロジェクトだけでなく、既存プロジェクトでも使用可能
- プロジェクトの現在の状態を自動分析
- 既存コードとの整合性を保ちながら変更を実行

### 2. 特殊プロンプトの統合
- [機能追加]、[バグ修正]、[リファクタリング]などの特殊プロンプトに対応
- プロジェクトプロンプトと特殊プロンプトを同時に使用可能
- アクションタイプに応じた最適なワークフローを自動選択

### 3. 品質管理の強化
- 「動くだけ実装」を防ぐための品質ゲート
- リアルタイム品質監視
- 自動品質改善提案

## 使用方法

### 基本構文
```
[プロジェクトプロンプト][特殊プロンプト]タスク説明
```

### 使用例

#### 新規プロジェクト作成（従来通り）
```
[vivezen][プロジェクト追加]AIチャットボットシステム
```

#### 既存プロジェクトへの機能追加
```
[vivezen][機能追加]ユーザー認証機能を追加
```

#### 品質改善
```
[vivezen][品質改善]既存コードのリファクタリングと品質向上
```

#### 他プロジェクトでの使用
```
[techzip][機能追加]Slack投稿機能を実装
[narou][バグ修正]PDF出力のエラーを修正
```

## 特殊プロンプト一覧

| プロンプト | 説明 | 主な用途 |
|---------|------|---------|
| [プロジェクト追加] | 新規プロジェクト作成 | 初期構築 |
| [機能追加] | 新機能の追加 | 機能拡張 |
| [バグ修正] | バグの修正 | 不具合対応 |
| [リファクタリング] | コード改善 | 保守性向上 |
| [品質改善] | 品質向上 | 技術的負債解消 |
| [パフォーマンス改善] | 性能最適化 | 速度改善 |
| [セキュリティ強化] | セキュリティ改善 | 脆弱性対策 |
| [テスト追加] | テスト追加 | カバレッジ向上 |
| [ドキュメント更新] | ドキュメント整備 | 可読性向上 |

## ワークフローの実行プロセス

### 1. コマンド解析
- プロジェクトプロンプトと特殊プロンプトを分離
- タスク説明を抽出
- アクションタイプを判定

### 2. プロジェクト状態分析
- プロジェクトの存在確認
- 既存コードの品質分析
- 仕様書の有無確認
- フレームワーク/言語の検出

### 3. ワークフロー選択
- 新規プロジェクト → 従来のフルワークフロー
- 既存プロジェクト + 機能追加 → 機能追加専用ワークフロー
- 既存プロジェクト + 品質改善 → 品質改善専用ワークフロー

### 4. 品質チェック
- 事前検証: 実装前の品質基準確認
- 実装中監視: リアルタイムで品質問題を検出
- 事後検証: 完成後の総合品質評価

### 5. 結果報告
- 実行結果のサマリー
- 品質スコアと改善提案
- 次のアクションの推奨

## 品質管理機能

### 動くだけ実装の防止
```python
# 検出される問題例
- ハードコーディング（localhost、固定パスワードなど）
- エラーハンドリングの欠如
- 入力検証の不足
- テストの欠如または不十分
- ドキュメントの不足
```

### 品質ゲート
```python
quality_thresholds = {
    "min_quality_score": 7.0,      # 最低品質スコア
    "max_complexity": 10,          # 最大循環的複雑度
    "min_test_coverage": 80,       # 最低テストカバレッジ
    "max_code_duplication": 5      # 最大コード重複率
}
```

### 自動改善提案
- コードの問題点を自動検出
- 具体的な改善方法を提案
- 可能な場合は自動修正を実行

## CLI使用方法

### 基本コマンド
```bash
# Python実行
python -m vibezen.integrations.enhanced_one_stop_workflow "[vivezen][機能追加]ログイン機能"

# オプション付き
python -m vibezen.integrations.enhanced_one_stop_workflow "[vivezen][品質改善]" \
    --path /path/to/project \
    --no-quality-check \
    --output result.json
```

### オプション
- `--path`: プロジェクトパス（省略時は自動検出）
- `--no-quality-check`: 自動品質チェックを無効化
- `--output`: 結果をJSONファイルに保存

## MIS/Knowledge Graph連携

### 自動記録される情報
- 実行したアクションとその結果
- 検出された品質問題と改善内容
- 実装パターンと成功/失敗の履歴
- プロジェクト間で共有可能な知見

### 活用方法
- 過去の実装パターンを参照
- 類似の問題に対する解決策を提案
- プロジェクト横断的な品質改善

## ベストプラクティス

### 1. 段階的な実装
```bash
# まず品質チェック
[vivezen][品質チェック]

# 問題があれば品質改善
[vivezen][品質改善]

# その後、機能追加
[vivezen][機能追加]新機能の実装
```

### 2. 定期的な品質チェック
- 機能追加の前後で品質チェックを実行
- 品質スコアが低下した場合は即座に対応
- 技術的負債の蓄積を防ぐ

### 3. テスト駆動開発
```bash
# テストを先に追加
[vivezen][テスト追加]新機能のテストケース

# その後、実装
[vivezen][機能追加]テストに合わせた実装
```

## トラブルシューティング

### Q: 品質ゲートでブロックされた
A: 品質レポートを確認し、指摘された問題を修正してから再実行

### Q: 既存プロジェクトが認識されない
A: --pathオプションで明示的にプロジェクトパスを指定

### Q: 特殊プロンプトが効かない
A: プロンプトの記載順序を確認（[プロジェクト][アクション]の順）

## 今後の拡張予定

1. **インタラクティブモード**: 対話的に品質改善を実施
2. **バッチ処理**: 複数プロジェクトの一括品質チェック
3. **CI/CD統合**: GitHub Actions等での自動実行
4. **カスタム品質ルール**: プロジェクト固有の品質基準設定